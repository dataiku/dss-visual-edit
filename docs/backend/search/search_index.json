{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>This is the technical documentation for the backend of the Visual Edit plugin. Return to the main documentation.</p>"},{"location":"#DataEditor.DataEditor","title":"<code>DataEditor</code>","text":"<p>This class provides CRUD methods to edit data from a Dataiku Dataset using the Event Sourcing pattern: edits are stored in a separate Dataset called the editlog. The original Dataset is never changed. Both Datasets are used to compute the edited state of the data.</p>"},{"location":"#DataEditor.DataEditor.__init__","title":"<code>__init__(original_ds_name, primary_keys, editable_column_names=None, linked_records=None, editschema_manual=None, project_key=None, editschema=None, authorized_users=None)</code>","text":"<p>Initializes Datasets (original and editlog) and properties used for data editing.</p> <p>Parameters:</p> Name Type Description Default <code>original_ds_name</code> <code>str</code> <p>The name of the original dataset.</p> required <code>primary_keys</code> <code>list</code> <p>A list of column names that uniquely identify a row in the dataset.</p> required <code>editable_column_names</code> <code>list</code> <p>A list of column names that can be edited. If None, all columns are editable.</p> <code>None</code> <code>project_key</code> <code>str</code> <p>The key of the project where the dataset is located. If None, the current project is used.</p> <code>None</code> <code>authorized_users</code> <code>list</code> <p>A list of user identifiers who are authorized to make edits. If None, all users are authorized.</p> <code>None</code> <code>linked_records</code> <code>list</code> <p>(Optional) A list of LinkedRecord objects that represent linked datasets or dataframes.</p> <code>None</code> <code>editschema_manual</code> <code>list</code> <p>(Optional) A list of EditSchema objects that define the primary keys and editable columns.</p> <code>None</code> <code>editschema</code> <code>list</code> <p>(Optional) A list of EditSchema objects that define the primary keys and editable columns.</p> <code>None</code> Notes <ul> <li>If they don't already exist, the editlog, edits and edited Datasets are created on the same Dataiku Connection as the original Dataset. The Recipes in between (replay and apply edits) are also created.</li> <li>Edits made via CRUD methods will instantly add rows to the editlog, but the edits and the edited Datasets won't be kept in \"sync\": they are only updated when the Recipes are run.</li> </ul>"},{"location":"#DataEditor.DataEditor.create_row","title":"<code>create_row(primary_keys, column_values)</code>","text":"<p>Creates a new row.</p> <p>Parameters:</p> Name Type Description Default <code>primary_keys</code> <code>dict</code> <p>A dictionary containing values for all primary keys. The set of values must be unique. Example: {\"id\": \"My new unique id\"}</p> required <code>column_values</code> <code>dict</code> <p>A dictionary containing values for all other columns. Example: {\"col1\": \"hey\", \"col2\": 42, \"col3\": True}</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>A message indicating that the row was created.</p> Notes <ul> <li>No data validation: this method does not check that the values are allowed for the specified columns.</li> <li>Attribution of the 'create' action in the editlog: the user identifier is only logged when this method is called in the context of a webapp served by Dataiku (which allows retrieving the identifier from the HTTP request headers sent by the user's web browser).</li> </ul>"},{"location":"#DataEditor.DataEditor.delete_row","title":"<code>delete_row(primary_keys)</code>","text":"<p>Deletes a row identified by the given primary key(s).</p> <p>Parameters:</p> Name Type Description Default <code>primary_keys</code> <code>dict</code> <p>A dictionary containing the primary key(s) value(s) that identify the row to delete.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>EditSuccess | EditFailure | EditUnauthorized</code> <p>A message indicating that the row was deleted.</p> Notes <p>Attribution of the 'delete' action in the editlog: the user identifier is only logged when this method is called in the context of a webapp served by Dataiku (which allows retrieving the identifier from the HTTP request headers sent by the user's web browser).</p>"},{"location":"#DataEditor.DataEditor.empty_editlog","title":"<code>empty_editlog()</code>","text":"<p>Writes an empty dataframe to the editlog dataset.</p>"},{"location":"#DataEditor.DataEditor.get_edited_cells_df","title":"<code>get_edited_cells_df()</code>","text":"<p>Returns a pandas DataFrame with the edited cells.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>pandas.DataFrame: A DataFrame containing only the edited rows and editable columns.</p>"},{"location":"#DataEditor.DataEditor.get_edited_cells_df_indexed","title":"<code>get_edited_cells_df_indexed()</code>","text":"<p>Returns a pandas DataFrame with the edited cells, indexed by the primary keys.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>pandas.DataFrame A DataFrame containing only the edited rows and editable columns, indexed by the primary keys.</p>"},{"location":"#DataEditor.DataEditor.get_edited_df","title":"<code>get_edited_df()</code>","text":"<p>Returns the edited dataframe.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>pandas.DataFrame: A DataFrame with all rows and columns from the original data, and edits applied.</p>"},{"location":"#DataEditor.DataEditor.get_edited_df_indexed","title":"<code>get_edited_df_indexed()</code>","text":"<p>Returns the edited dataframe, indexed by the primary keys.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>pandas.DataFrame: A DataFrame with all rows and columns from the original data, edits applied, and primary keys as index.</p>"},{"location":"#DataEditor.DataEditor.get_editlog_df","title":"<code>get_editlog_df()</code>","text":"<p>Returns the contents of the editlog.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>pandas.DataFrame: A DataFrame containing the editlog.</p>"},{"location":"#DataEditor.DataEditor.get_original_df","title":"<code>get_original_df()</code>","text":"<p>Returns the original dataframe without any edits.</p> <p>Returns:</p> Type Description <p>pandas.DataFrame: The original data.</p>"},{"location":"#DataEditor.DataEditor.get_row","title":"<code>get_row(primary_keys)</code>","text":"<p>Retrieve a single row from the dataset that was created, updated or deleted.</p> <p>Parameters:</p> Name Type Description Default <code>primary_keys</code> <code>dict</code> <p>A dictionary containing values for all primary keys defined in the initial Visual Edit setup. The set of values must be unique. Example: {     \"key1\": \"cat\",     \"key2\": \"2022-12-21\", }</p> required <p>Returns:</p> Type Description <p>pandas.DataFrame: A single-row dataframe containing the values of editable columns, indexed by the primary keys. Example:</p> <pre><code>key1        key2        editable_column1    editable_column2\n\"cat\"       2022-12-21  \"hello\"             42\n</code></pre> Notes <ul> <li>The current implementation loads all edited rows in memory, then filters the rows that match the provided primary key values.</li> <li>This method does not read rows that were not edited, and it does not read columns which are not editable.<ul> <li>If some rows of the dataset were created, then by definition all columns are editable (including primary keys).</li> <li>If no row was created, editable columns are those defined in the initial Visual Edit setup.</li> </ul> </li> </ul>"},{"location":"#DataEditor.DataEditor.update_row","title":"<code>update_row(primary_keys, column, value)</code>","text":"<p>Updates a row.</p> <p>Parameters:</p> Name Type Description Default <code>primary_keys</code> <code>dict</code> <p>A dictionary containing primary key(s) value(s) that identify the row to update.</p> required <code>column</code> <code>str</code> <p>The name of the column to update.</p> required <code>value</code> <code>str</code> <p>The value to set for the cell identified by key and column.</p> required <p>Returns:</p> Name Type Description <code>list</code> <code>List[EditSuccess | EditFailure | EditUnauthorized]</code> <p>A list of objects indicating the success or failure to insert an editlog.</p> Note <ul> <li>No data validation: this method does not check that the value is allowed for the specified column.</li> <li>Attribution of the 'update' action in the editlog: the user identifier is only logged when this method is called in the context of a webapp served by Dataiku (which allows retrieving the identifier from the HTTP request headers sent by the user's web browser).</li> </ul>"}]}